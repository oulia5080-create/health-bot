import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
import random
import datetime

# –¢–≤–æ–π –ª–∏—á–Ω—ã–π –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –ø–æ–ª—É—á–∏–ª
API_TOKEN = '8543661868:AAEUgL2Ijxa1UyuDMIm7QRQLd6c3_-TPTjE'

bot = Bot(token=API_TOKEN)
dp = Dispatcher()

# –î–∞–Ω–Ω—ã–µ –∏–∑ —Ç–≤–æ–∏—Ö —Ñ–æ—Ç–æ
TASKS = {
    "–ó–∏–º–∞": ["–ü–æ–∫–æ—Ä–º–∏—Ç—å –ø—Ç–∏—Ü", "–ù–∞–µ—Å—Ç—å—Å—è –º–∞–Ω–¥–∞—Ä–∏–Ω–æ–≤", "–°—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–∞—Ç–æ–∫", "SPA-–∫–æ–º–ø–ª–µ–∫—Å"],
    "–í–µ—Å–Ω–∞": ["–†–∞–Ω–∫–æ–≤–∞—è –ø—Ä–æ–±–µ–∂–∫–∞", "–ü—Ä–∏–≥–æ—Ç—É–≤–∞—Ç–∏ –º–ª–∏–Ω—Ü—ñ", "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–µ –ø—Ä–∏–±–∏—Ä–∞–Ω–Ω—è", "–ü—Ä–æ–≥—É–ª–∫–∞ –≤ –ø–∞—Ä–∫–µ"],
    "–õ–µ—Ç–æ": ["–ó—Ä–æ–±–∏—Ç–∏ –≤—ñ—Ç–∞–º—ñ–Ω–Ω–∏–π —Å–º—É–∑—ñ", "–ü–æ–∫–∞—Ç–∞—Ç–∏—Å—å –Ω–∞ –≥–æ–π–¥–∞–ª—Ü—ñ", "–ó—É—Å—Ç—Ä—ñ—Ç–∏ —Å–≤—ñ—Ç–∞–Ω–æ–∫", "–í–µ–ª–æ–ø—Ä–æ–≥—É–ª–∫–∞"],
    "–û—Å–µ–Ω—å": ["–ü—Ä–∏–≥–æ—Ç—É–≤–∞—Ç–∏ –≥–∞—Ä–±—É–∑–æ–≤–∏–π —Å—É–ø", "–ó–∞–ø–∏—Å–∞—Ç–∏—Å—å —É —Å–ø–æ—Ä—Ç–∑–∞–ª", "–°—Ö–æ–¥–∏—Ç–∏ –≤ –ª—ñ—Å", "–í–µ—á–µ—Ä –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏"]
}

@dp.message(Command("start"))
async def start(message: types.Message):
    await message.answer("‚úÖ –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω! –ù–∞–ø–∏—à–∏ /task, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è.")

@dp.message(Command("task"))
async def send_task(message: types.Message):
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–µ–∑–æ–Ω
    month = datetime.datetime.now().month
    season = "–ó–∏–º–∞" if month in [12, 1, 2] else "–í–µ—Å–Ω–∞" if month in [3, 4, 5] else "–õ–µ—Ç–æ" if month in [6, 7, 8] else "–û—Å–µ–Ω—å"
    
    task = random.choice(TASKS[season])
    await message.answer(f"üåü –°–µ–∑–æ–Ω: {season}\nüëâ –í–∞—à–µ –∑–∞–¥–∞–Ω–∏–µ: {task}\n\n–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –∏ —É–∫—Ä–µ–ø–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ! üí™")

async def main():
    print("–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è... –ü—Ä–æ–≤–µ—Ä—å Telegram!")
    await dp.start_polling(bot)

if __name__ == '__main__':
    try:
        asyncio.run(main())
    except:
        print("–ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")