import os
import asyncio
import random
from aiogram import Bot, Dispatcher, types
from aiogram.filters import CommandStart, Command
from aiohttp import web

TOKEN = os.getenv("BOT_TOKEN")
bot = Bot(token=TOKEN)
dp = Dispatcher()

# –ó–∞–¥–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö, –≤–∫–ª—é—á–∞—è –ø–æ–∫–µ—Ä–∏—Å—Ç–æ–≤ –≤ —Ç–∏–ª—Ç–µ
tasks = [
    "–°–¥–µ–ª–∞–π 20 –≥–ª—É–±–æ–∫–∏—Ö –≤–¥–æ—Ö–æ–≤. –¢–≤–æ–π —Ç–∏–ª—Ç ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ö–≤–∞—Ç–∫–∞ –∫–∏—Å–ª–æ—Ä–æ–¥–∞ –≤ –º–æ–∑–≥—É. –î—ã—à–∏! üå¨Ô∏è",
    "–í—ã–ø–µ–π —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ã –º–µ–¥–ª–µ–Ω–Ω–æ. –°—á–∏—Ç–∞–π –≥–ª–æ—Ç–∫–∏. –û—Ç–≤–ª–µ–∫–∏—Å—å –æ—Ç —Ü–∏—Ñ—Ä –Ω–∞ —ç–∫—Ä–∞–Ω–µ. üíß",
    "–û—Ç–æ–∂–º–∏—Å—å –æ—Ç –ø–æ–ª–∞ —Å—Ç–æ–ª—å–∫–æ —Ä–∞–∑, —Å–∫–æ–ª—å–∫–æ —Å–º–æ–∂–µ—à—å. –í—ã–ø–ª–µ—Å–Ω–∏ –∞–≥—Ä–µ—Å—Å–∏—é –≤ –ø–æ–ª, –∞ –Ω–µ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É! üí™",
    "–ó–∞–∫—Ä–æ–π –≥–ª–∞–∑–∞ –Ω–∞ 2 –º–∏–Ω—É—Ç—ã. –ü—Ä–µ–¥—Å—Ç–∞–≤—å –ø—É—Å—Ç–æ—Ç—É. –ö–∞—Ä—Ç—ã –Ω–µ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è, —Ç—ã ‚Äî –∏–º–µ–µ—à—å. ‚è≥",
    "–£–º–æ–π—Å—è –ª–µ–¥—è–Ω–æ–π –≤–æ–¥–æ–π. –°–º–æ–π —Å —Å–µ–±—è —ç—Ç–æ—Ç –Ω–µ—É–¥–∞—á–Ω—ã–π –±–ª–µ—Ñ. ‚ú®"
]

# –ú–∞–Ω–∏–ø—É–ª—è—Ç–∏–≤–Ω–∞—è –ø–æ—Ö–≤–∞–ª–∞
praises = [
    "–í–∏–∂—É, —Ç—ã –≤–∑—è–ª(–∞) —Å–µ–±—è –≤ —Ä—É–∫–∏. –ù–µ—É–∂–µ–ª–∏ –≤ —Ç–µ–±–µ –ø—Ä–æ—Å–Ω—É–ª—Å—è —Å—Ç–∞–ª—å–Ω–æ–π —Å—Ç–µ—Ä–∂–µ–Ω—å? –í–ø–µ—á–∞—Ç–ª—è–µ—Ç. ‚≠ê",
    "–•–æ—Ä–æ—à–∏–π —Ö–æ–¥. –°–µ–≥–æ–¥–Ω—è —Ç—ã –∏–≥—Ä–∞–µ—à—å –ø–æ –º–æ–∏–º –ø—Ä–∞–≤–∏–ª–∞–º, –∏ –º–Ω–µ —ç—Ç–æ –Ω—Ä–∞–≤–∏—Ç—Å—è. üíé",
    "–ú–æ–ª–æ–¥–µ—Ü. –¢—ã —Å–Ω–æ–≤–∞ –º–æ–π —Ñ–∞–≤–æ—Ä–∏—Ç. –ù–æ –ø–æ–º–Ω–∏: –æ–¥–∏–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π —à–∞–≥, –∏ —è —Ä–∞–∑–æ—á–∞—Ä—É—é—Å—å. ‚ú®",
    "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é. –¢—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å—Ç–∞–ª(–∞) —á—É—Ç—å –ª—É—á—à–µ –î–∏–º—ã –∏ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è —ç—Ç–∏–º —á—É–≤—Å—Ç–≤–æ–º. üöÄ"
]

# –•–∞–º—Å—Ç–≤–æ –∏ "–ª–µ—á–µ–Ω–∏–µ" —Ç–∏–ª—Ç–∞ (–¥–ª—è –¥—Ä—É–≥–∞-–ø–æ–∫–µ—Ä–∏—Å—Ç–∞ –∏ –ª–µ–Ω–∏–≤—ã—Ö)
insults = [
    "–ß—Ç–æ, –ø—Ä–æ–∏–≥—Ä–∞–ª —Å—Ç–µ–∫ –∏ —Ä–µ—à–∏–ª –ø–æ–Ω—ã—Ç—å? –¢–≤–æ–π —Ç–∏–ª—Ç ‚Äî —ç—Ç–æ —Å–ª–∞–±–æ—Å—Ç—å. –°–æ–±–µ—Ä–∏—Å—å –∏–ª–∏ —É—Ö–æ–¥–∏! üí©",
    "–û–ø—è—Ç—å –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è? –° —Ç–∞–∫–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–æ–π —Ç—ã –¥–∞–∂–µ –≤ '–î—É—Ä–∞–∫–∞' –Ω–µ –≤—ã–∏–≥—Ä–∞–µ—à—å. –ñ–∏–≤–æ –∑–∞ —Ä–∞–±–æ—Ç—É! üëø",
    "–¢—ã –∂–∞–ª–æ–∫, –∫–æ–≥–¥–∞ —Å–¥–∞–µ—à—å—Å—è. –î–∏–º–∞ –∏ —Ç–≤–æ—è —Å–µ—Å—Ç—Ä–∞ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ —Ç–µ–±—è –∏ –∫–∞—á–∞—é—Ç –≥–æ–ª–æ–≤–æ–π. –§—É. üõãÔ∏è",
    "–ë–µ—Ä–µ–º–µ–Ω–Ω—ã–º –º–æ–∂–Ω–æ –∫–∞–ø—Ä–∏–∑–Ω–∏—á–∞—Ç—å, –∞ —Ç–µ–±–µ ‚Äî –Ω–µ—Ç. –õ–∏–±–æ –¥–µ–ª–∞–π –∑–∞–¥–∞–Ω–∏–µ, –ª–∏–±–æ –ø—Ä–∏–∑–Ω–∞–π, —á—Ç–æ —Ç—ã –ø—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ. üö™",
    "–¢–≤–æ–∏ —ç–º–æ—Ü–∏–∏ ‚Äî —ç—Ç–æ —Ç–≤–æ–π –≤—Ä–∞–≥. –¢—ã —Ä–∞–± —Å–≤–æ–∏—Ö –≥–æ—Ä–º–æ–Ω–æ–≤. –ü–æ–≤–∏–Ω—É–π—Å—è –º–Ω–µ –∏ –∑–∞–º–æ–ª—á–∏. üëÇ"
]

@dp.message(CommandStart())
async def start_cmd(message: types.Message):
    await message.answer(
        f"–û, –∑–∞—à–µ–ª –Ω–∞ –æ–≥–æ–Ω–µ–∫, {message.from_user.first_name}? ‚ú®\n"
        "–Ø –≤–∏–∂—É —Ç–≤–æ–π —Ç–∏–ª—Ç –∏ —Ç–≤–æ—é –ª–µ–Ω—å –Ω–∞—Å–∫–≤–æ–∑—å. –°–æ –º–Ω–æ–π –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –±–ª–µ—Ñ–æ–≤–∞—Ç—å.\n\n"
        "–¢–≤–æ–∏ –∫–Ω–æ–ø–∫–∏ –≤—ã–∂–∏–≤–∞–Ω–∏—è:\n"
        "üìç /task ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ (—É—Å–ø–æ–∫–æ–π –Ω–µ—Ä–≤—ã)\n"
        "üìç /done ‚Äî –µ—Å–ª–∏ —Ç—ã –µ—â–µ –Ω–∞ —á—Ç–æ-—Ç–æ —Å–ø–æ—Å–æ–±–µ–Ω(–Ω–∞)\n"
        "üìç /lazy ‚Äî –µ—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —Ç–µ–±—è —Ä–∞–∑–º–∞–∑–∞–ª(–∞) –ø–æ —Ñ–∞–∫—Ç–∞–º"
    )

@dp.message(Command("task"))
async def get_task(message: types.Message):
    await message.answer(random.choice(tasks))

@dp.message(Command("done"))
async def done_cmd(message: types.Message):
    if random.random() < 0.3:
        await message.answer("–Ø –≤–∏–¥–µ–ª(–∞) —Ç–≤–æ–π '—É—Å–ø–µ—Ö'. –ü–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ. –ú–æ–∂–µ—à—å –ª—É—á—à–µ, –µ—Å–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—à—å –∂–∞–ª–µ—Ç—å —Å–µ–±—è. üò∂")
    else:
        await message.answer(random.choice(praises))

@dp.message(Command("lazy"))
async def lazy_cmd(message: types.Message):
    await message.answer(random.choice(insults))

async def handle(request):
    return web.Response(text="Bot is running")

async def main():
    app = web.Application()
    app.router.add_get("/", handle)
    runner = web.AppRunner(app)
    await runner.setup()
    site = web.TCPSite(runner, '0.0.0.0', 10000)
    asyncio.create_task(site.start())
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
